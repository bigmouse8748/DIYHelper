<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - DIY Smart Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        /* Header */
        .header {
            background: #ffffff;
            border-bottom: 1px solid #e4e7ed;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 28px;
        }

        .site-title {
            font-size: 20px;
            font-weight: 700;
            color: #303133;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #606266;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: transparent;
            color: #606266;
            border: 1px solid #dcdfe6;
        }

        .btn-secondary:hover {
            color: #667eea;
            border-color: #667eea;
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .welcome-section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            color: #303133;
            margin-bottom: 16px;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: #606266;
            margin-bottom: 32px;
        }

        /* Feature Cards */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: #667eea;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 20px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 12px;
        }

        .feature-description {
            color: #606266;
            margin-bottom: 20px;
        }

        .feature-action {
            width: 100%;
        }

        /* Recent Activity */
        .recent-section {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 24px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            background: #f8f9ff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #667eea;
            font-size: 16px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 500;
            color: #303133;
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 14px;
            color: #909399;
        }

        /* Language Switcher */

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                padding: 0 16px;
                height: 60px;
            }
            
            .site-title {
                font-size: 18px;
            }
            
            .main-content {
                padding: 24px 16px;
            }
            
            .welcome-section {
                padding: 24px;
            }
            
            .welcome-title {
                font-size: 24px;
            }
            
            .welcome-subtitle {
                font-size: 16px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .feature-card {
                padding: 24px;
            }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.success {
            background: #67c23a;
        }

        .toast.error {
            background: #f56c6c;
        }

        .toast.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo-section">
                <div class="logo-icon">üî®</div>
                <h1 class="site-title" id="siteTitle">DIY Smart Assistant</h1>
            </div>
            
            <div class="user-section">
                <div class="user-info">
                    <span>üë§</span>
                    <span id="username">User</span>
                </div>
                <button class="btn btn-primary" onclick="openAdminPanel()" id="adminBtn" style="display: none;">
                    ‚öôÔ∏è Admin Panel
                </button>
                <button class="btn btn-secondary" onclick="logout()" id="logoutBtn">Sign Out</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <h1 class="welcome-title" id="welcomeTitle">Welcome to Your DIY Dashboard</h1>
            <p class="welcome-subtitle" id="welcomeSubtitle">
                Explore powerful AI-driven tools to enhance your DIY projects. Upload images, get intelligent recommendations, and receive expert guidance.
            </p>
        </section>

        <!-- Features Grid -->
        <section class="features-grid">
            <div class="feature-card" onclick="navigateToFeature('tool-identification')">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title" id="toolIdTitle">Tool Identification</h3>
                <p class="feature-description" id="toolIdDescription">
                    Upload an image of any tool and get instant identification with purchase recommendations from top retailers.
                </p>
                <button class="btn btn-primary feature-action" id="toolIdAction">
                    Start Identifying
                </button>
            </div>

            <div class="feature-card" onclick="navigateToFeature('smart-tool-finder')">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title" id="smartToolFinderTitle">Smart Tool Finder</h3>
                <p class="feature-description" id="smartToolFinderDescription">
                    Interactive conversation to find the perfect tools for your specific tasks. Just tell us what you want to accomplish!
                </p>
                <button class="btn btn-primary feature-action" id="smartToolFinderAction">
                    Find Tools
                </button>
            </div>

            <div class="feature-card" onclick="navigateToFeature('project-analysis')">
                <div class="feature-icon">üìä</div>
                <h3 class="feature-title" id="projectAnalysisTitle">Project Analysis</h3>
                <p class="feature-description" id="projectAnalysisDescription">
                    Upload project images for comprehensive analysis including materials, steps, and safety guidelines.
                </p>
                <button class="btn btn-primary feature-action" id="projectAnalysisAction">
                    Analyze Project
                </button>
            </div>

            <div class="feature-card" onclick="navigateToFeature('our-picks')">
                <div class="feature-icon">‚≠ê</div>
                <h3 class="feature-title" id="ourPicksTitle">Our Picks</h3>
                <p class="feature-description" id="ourPicksDescription">
                    Browse our curated collection of top-rated DIY tools and materials, selected by experts for quality and value.
                </p>
                <button class="btn btn-primary feature-action" id="ourPicksAction">
                    Browse Products
                </button>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="recent-section">
            <h2 class="section-title" id="recentTitle">Recent Activity</h2>
            <div id="activityList">
                <div class="activity-item">
                    <div class="activity-icon">üîç</div>
                    <div class="activity-content">
                        <div class="activity-title" id="activity1">Welcome to DIY Smart Assistant!</div>
                        <div class="activity-time" id="activity1Time">Just now</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="toast" id="toast">
        <span id="toastMessage"></span>
    </div>

    <script>
        // Language support
        const translations = {
            en: {
                siteTitle: 'DIY Smart Assistant',
                welcomeTitle: 'Welcome to Your DIY Dashboard',
                welcomeSubtitle: 'Explore powerful AI-driven tools to enhance your DIY projects. Upload images, get intelligent recommendations, and receive expert guidance.',
                toolIdTitle: 'Tool Identification',
                toolIdDescription: 'Upload an image of any tool and get instant identification with purchase recommendations from top retailers.',
                toolIdAction: 'Start Identifying',
                smartToolFinderTitle: 'Smart Tool Finder',
                smartToolFinderDescription: 'Interactive conversation to find the perfect tools for your specific tasks. Just tell us what you want to accomplish!',
                smartToolFinderAction: 'Find Tools',
                projectAnalysisTitle: 'Project Analysis',
                projectAnalysisDescription: 'Upload project images for comprehensive analysis including materials, steps, and safety guidelines.',
                projectAnalysisAction: 'Analyze Project',
                ourPicksTitle: 'Our Picks',
                ourPicksDescription: 'Browse our curated collection of top-rated DIY tools and materials, selected by experts for quality and value.',
                ourPicksAction: 'Browse Products',
                recentTitle: 'Recent Activity',
                logoutBtn: 'Sign Out',
                adminBtn: 'Admin Panel',
                adminOurPicks: 'Our Picks Management',
                adminAnalytics: 'Analytics (Coming Soon)',
                adminUsers: 'User Management',
                activity1: 'Welcome to DIY Smart Assistant!',
                activity1Time: 'Just now',
                logoutSuccess: 'Logged out successfully'
            },
            zh: {
                siteTitle: 'DIY Êô∫ËÉΩÂä©Êâã',
                welcomeTitle: 'Ê¨¢ËøéÊù•Âà∞ÊÇ®ÁöÑ DIY ‰ª™Ë°®Êùø',
                welcomeSubtitle: 'Êé¢Á¥¢Âº∫Â§ßÁöÑ AI È©±Âä®Â∑•ÂÖ∑Êù•Â¢ûÂº∫ÊÇ®ÁöÑ DIY È°πÁõÆ„ÄÇ‰∏ä‰º†ÂõæÁâáÔºåËé∑ÂæóÊô∫ËÉΩÊé®ËçêÔºåÂπ∂Êé•Âèó‰∏ìÂÆ∂ÊåáÂØº„ÄÇ',
                toolIdTitle: 'Â∑•ÂÖ∑ËØÜÂà´',
                toolIdDescription: '‰∏ä‰º†‰ªª‰ΩïÂ∑•ÂÖ∑ÁöÑÂõæÁâáÔºåÂç≥ÂèØËé∑ÂæóÂç≥Êó∂ËØÜÂà´ÂíåÊù•Ëá™È°∂Á∫ßÈõ∂ÂîÆÂïÜÁöÑË¥≠‰π∞Êé®Ëçê„ÄÇ',
                toolIdAction: 'ÂºÄÂßãËØÜÂà´',
                smartToolFinderTitle: 'Êô∫ËÉΩÂ∑•ÂÖ∑Êü•ÊâæÂô®',
                smartToolFinderDescription: 'ÈÄöËøá‰∫§‰∫íÂØπËØù‰∏∫ÊÇ®ÁöÑÁâπÂÆö‰ªªÂä°ÊâæÂà∞ÂÆåÁæéÁöÑÂ∑•ÂÖ∑„ÄÇÂè™ÈúÄÂëäËØâÊàë‰ª¨ÊÇ®ÊÉ≥Ë¶ÅÂÆåÊàê‰ªÄ‰πàÔºÅ',
                smartToolFinderAction: 'Êü•ÊâæÂ∑•ÂÖ∑',
                projectAnalysisTitle: 'È°πÁõÆÂàÜÊûê',
                projectAnalysisDescription: '‰∏ä‰º†È°πÁõÆÂõæÁâáËøõË°åÂÖ®Èù¢ÂàÜÊûêÔºåÂåÖÊã¨ÊùêÊñô„ÄÅÊ≠•È™§ÂíåÂÆâÂÖ®ÊåáÂçó„ÄÇ',
                projectAnalysisAction: 'ÂàÜÊûêÈ°πÁõÆ',
                ourPicksTitle: 'Êàë‰ª¨ÁöÑÊé®Ëçê',
                ourPicksDescription: 'ÊµèËßàÊàë‰ª¨‰∏ìÂÆ∂Á≤æÈÄâÁöÑ‰ºòË¥® DIY Â∑•ÂÖ∑ÂíåÊùêÊñôÔºå‰∏∫ÊÇ®ÁöÑÈ°πÁõÆÊèê‰æõÊúÄ‰Ω≥ÂìÅË¥®Âíå‰ª∑ÂÄº„ÄÇ',
                ourPicksAction: 'ÊµèËßà‰∫ßÂìÅ',
                recentTitle: 'ÊúÄËøëÊ¥ªÂä®',
                logoutBtn: 'ÈÄÄÂá∫ÁôªÂΩï',
                adminBtn: 'ÁÆ°ÁêÜÂëòÈù¢Êùø',
                adminOurPicks: 'Our Picks ÁÆ°ÁêÜ',
                adminAnalytics: 'Êï∞ÊçÆÂàÜÊûêÔºàÂç≥Â∞ÜÊé®Âá∫Ôºâ',
                adminUsers: 'Áî®Êà∑ÁÆ°ÁêÜ',
                activity1: 'Ê¨¢Ëøé‰ΩøÁî® DIY Êô∫ËÉΩÂä©ÊâãÔºÅ',
                activity1Time: 'ÂàöÂàö',
                logoutSuccess: 'ÊàêÂäüÈÄÄÂá∫ÁôªÂΩï'
            }
        };



        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function navigateToFeature(feature) {
            console.log(`Navigating to ${feature}`);
            
            switch(feature) {
                case 'tool-identification':
                    window.location.href = 'tool-identification.html';
                    break;
                case 'smart-tool-finder':
                    window.location.href = 'smart-tool-finder.html';
                    break;
                case 'project-analysis':
                    window.location.href = 'project-analysis.html';
                    break;
                case 'our-picks':
                    window.location.href = 'our-picks.html';
                    break;
                default:
                    console.log('Unknown feature:', feature);
            }
        }

        function logout() {
            localStorage.removeItem('access_token');
            localStorage.removeItem('user_data');

            showToast('Logout successful!', 'success');
            
            setTimeout(() => {
                window.location.href = 'standalone.html';
            }, 1000);
        }

        // Check authentication
        function checkAuth() {
            const token = localStorage.getItem('access_token');
            const userData = localStorage.getItem('user_data');
            
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            
            // Display user info if available
            if (userData) {
                try {
                    const user = JSON.parse(userData);
                    document.getElementById('username').textContent = user.username || user.email || 'User';
                    
                    // Show admin panel button if user is admin
                    if (user.user_type === 'admin') {
                        document.getElementById('adminBtn').style.display = 'inline-flex';
                    }
                } catch (e) {
                    console.error('Error parsing user data:', e);
                }
            }
        }

        // Open admin panel
        function openAdminPanel() {
            // Create a dropdown menu for admin options
            const existingDropdown = document.getElementById('adminDropdown');
            if (existingDropdown) {
                existingDropdown.remove();
                return;
            }

            const dropdown = document.createElement('div');
            dropdown.id = 'adminDropdown';
            dropdown.style.cssText = `
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                min-width: 200px;
                margin-top: 5px;
            `;

            dropdown.innerHTML = `
                <div style="padding: 8px 0;">
                    <a href="admin-our-picks.html" style="display: block; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f0f0f0; transition: background-color 0.3s;">
                        üõí Admin Our Picks
                    </a>
                    <a href="#" onclick="alert('Analytics feature coming soon!')" style="display: block; padding: 12px 16px; text-decoration: none; color: #999; transition: background-color 0.3s;">
                        üìä Admin Analytics
                    </a>
                    <a href="admin-user-management.html" style="display: block; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f0f0f0; transition: background-color 0.3s;">
                        üë• User Management
                    </a>
                </div>
            `;

            // Add hover effects
            const links = dropdown.querySelectorAll('a');
            links.forEach(link => {
                link.addEventListener('mouseenter', () => {
                    link.style.backgroundColor = '#f8f9fa';
                });
                link.addEventListener('mouseleave', () => {
                    link.style.backgroundColor = '';
                });
            });

            // Position dropdown relative to admin button
            const adminBtn = document.getElementById('adminBtn');
            adminBtn.style.position = 'relative';
            adminBtn.appendChild(dropdown);

            // Close dropdown when clicking outside
            setTimeout(() => {
                document.addEventListener('click', function closeDropdown(e) {
                    if (!adminBtn.contains(e.target)) {
                        dropdown.remove();
                        document.removeEventListener('click', closeDropdown);
                    }
                });
            }, 100);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkAuth();
            
        });
    </script>
</body>
</html>